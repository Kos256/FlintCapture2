<Window x:Name="window" x:Class="FlintCapture2.ImageEditWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:FlintCapture2"
        mc:Ignorable="d"
            Title="New Screenshot" Height="600" Width="850" WindowStyle="None" AllowsTransparency="True" Background="{x:Null}" Foreground="White" FontSize="16" BorderBrush="#FF00B8FD" FontFamily="{DynamicResource ExoRegular}" WindowStartupLocation="CenterScreen" MinHeight="400" MinWidth="600">
    <Grid x:Name="RootGrid" Background="#FF00141C">
        <Grid x:Name="WindowBarGrid" VerticalAlignment="Top" Height="50" Background="#FF00B8FD">
            <TextBlock x:Name="winTitle" HorizontalAlignment="Left" Margin="15,0,0,0" TextWrapping="Wrap" VerticalAlignment="Center" Foreground="Black" FontSize="20" Text="{Binding Title, ElementName=window}"/>
            <Button TabIndex="-1" x:Name="winCtrlClose" HorizontalAlignment="Right" Foreground="{x:Null}" Width="50" BorderBrush="{x:Null}" BorderThickness="0,0,0,0" Click="winCtrlClose_Click" Margin="0,0,5,0">
                <Button.Background>
                    <ImageBrush ImageSource="/assets/icons/window controls/close.png" Viewport="0.25,0.25,0.5,0.5"/>
                </Button.Background>
            </Button>
            <Button TabIndex="-1" x:Name="winCtrlMinimize" HorizontalAlignment="Right" Foreground="{x:Null}" Width="50" BorderBrush="{x:Null}" BorderThickness="0,0,0,0" Margin="0,0,60,0" Click="winCtrlMinimize_Click">
                <Button.Background>
                    <ImageBrush Stretch="Uniform" ImageSource="/assets/icons/window controls/minimize.png" Viewport="0.25,0.25,0.5,0.5"/>
                </Button.Background>
            </Button>
            <Rectangle x:Name="winbarCollider" Margin="0,0,120,0" Fill="Transparent"/>
        </Grid>
        <Border x:Name="windowFocusBorder" BorderBrush="{Binding BorderBrush, ElementName=window}" BorderThickness="1" d:IsLocked="True" d:IsHidden="True"/>
        <Grid Margin="10,61,10,90" Background="#0CFFFFFF">
            <TextBlock x:Name="loadingImgText" HorizontalAlignment="Center" TextWrapping="Wrap" Text="Loading image..." VerticalAlignment="Center" FontSize="48" Foreground="#FF00B9FF"/>
            
            <Image x:Name="imgPreview"/>
            
            <Canvas x:Name="cropCanvas">
                <Path x:Name="cropOverlayPath" Fill="#7F000000" Stretch="None"/>
                <Border x:Name="cropSelectionRect"
           BorderBrush="#FF00B8FD"
           Width="100"
           Height="100"
           Canvas.Left="110"
           Canvas.Top="110" BorderThickness="2,2,2,2">
                    <Grid>
                        <Grid x:Name="cropSelectionGrid" Background="#1600B7FF" Cursor="SizeAll" d:IsLocked="True">
                            <Grid.RowDefinitions>
                                <RowDefinition/>
                                <RowDefinition Height="1"/>
                                <RowDefinition/>
                                <RowDefinition Height="1"/>
                                <RowDefinition/>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition/>
                                <ColumnDefinition Width="1"/>
                                <ColumnDefinition/>
                                <ColumnDefinition Width="1"/>
                                <ColumnDefinition/>
                            </Grid.ColumnDefinitions>
                            <Rectangle Grid.Column="1" Grid.RowSpan="5" Fill="#7F00B7FF"/>
                            <Rectangle Grid.Column="3" Grid.RowSpan="5" Fill="#7F00B7FF"/>
                            <Rectangle Fill="#7F00B7FF" Grid.Row="1" Grid.ColumnSpan="5"/>
                            <Rectangle Fill="#7F00B7FF" Grid.Row="3" Grid.ColumnSpan="5"/>
                        </Grid>
                        <Border BorderBrush="#FF00B8FD" BorderThickness="4,4,0,0" Width="15" Height="15" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="-5,-5,0,0"/>
                        <Border BorderBrush="#FF00B8FD" BorderThickness="0,0,4,4" Width="15" Height="15" HorizontalAlignment="Right" VerticalAlignment="Bottom" Margin="0,0,-5,-5"/>
                    </Grid>
                </Border>

                <!-- Top Left -->
                <Thumb x:Name="tlHandle"
       Width="20"
       Height="20"
       Background="White"
       BorderBrush="Black"
       BorderThickness="1" Canvas.Left="100" Canvas.Top="100" Opacity="0" Cursor="SizeNWSE"/>

                <!-- Top Right -->
                <Thumb x:Name="trHandle"
       Width="20"
       Height="20"
       BorderBrush="Black"
       BorderThickness="1" Canvas.Left="200" Opacity="0" Canvas.Top="100"/>

                <!-- Bottom Left -->
                <Thumb x:Name="blHandle"
       Width="20"
       Height="20"
       Background="White"
       BorderBrush="Black"
       BorderThickness="1" Canvas.Left="100" Canvas.Top="200" Opacity="0"/>

                <!-- Bottom Right -->
                <Thumb x:Name="brHandle"
       Width="20"
       Height="20"
       Background="White"
       BorderBrush="Black"
       BorderThickness="1" Canvas.Left="200" Canvas.Top="200" Opacity="0" Cursor="SizeNWSE"/>
            </Canvas>
            <Canvas x:Name="annotationCanvas">

                <InkCanvas x:Name="annotationInkCanvas" Visibility="Hidden" Background="{x:Null}">
                    <InkCanvas.DefaultDrawingAttributes>
                        <DrawingAttributes Color="Red"
                       Width="4"
                       Height="4"
                       FitToCurve="True"/>
                    </InkCanvas.DefaultDrawingAttributes>
                </InkCanvas>
            </Canvas>
        </Grid>
        <Button x:Name="copyBtn" Content="Copy image" Style="{StaticResource DefaultButtonStyle}" HorizontalAlignment="Right" Margin="0,0,80,20" VerticalAlignment="Bottom" Click="menuBtnClicked"/>
        <Button x:Name="saveBtn" Content="Save" Style="{StaticResource DefaultButtonStyle}" HorizontalAlignment="Right" Margin="0,0,10,20" VerticalAlignment="Bottom" Click="menuBtnClicked"/>
        <Button x:Name="cropBtn" Content="Crop" Style="{StaticResource DefaultButtonStyle}" HorizontalAlignment="Left" Margin="10,0,0,20" VerticalAlignment="Bottom" Click="menuBtnClicked"/>
        <TextBlock HorizontalAlignment="Left" TextWrapping="Wrap" VerticalAlignment="Bottom" Margin="10,0,0,60">
            <Run Text="Status:" Foreground="#FF00B8FD" FontFamily="{DynamicResource ExoBold}"/>
            <Run x:Name="statusTextRun" Text="Unknown?" Foreground="#FF99E3FF"/>
        </TextBlock>

    </Grid>
</Window>
